<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:local="clr-namespace:Feleves_feladat"
             x:Class="Feleves_feladat.ChooseWorkoutPage"
             x:DataType="local:ChooseWorkoutPageViewModel"
             Title="ChooseWorkoutPage">
    <ContentPage.Resources>
        <local:WorkoutColorConverter x:Key="WorkoutColorConv"/>
    </ContentPage.Resources>

    <Grid RowDefinitions="Auto, *, Auto">

        <ScrollView Grid.Row="1" 
                    BackgroundColor="{StaticResource PrimaryColor}"
                    >
            <VerticalStackLayout>
                <CollectionView ItemsSource="{Binding WorkoutTemplates}">
                    <CollectionView.ItemTemplate>
                        <DataTemplate x:DataType="local:Workout">
                            <VerticalStackLayout>
                                <SwipeView>
                                    <SwipeView.RightItems>
                                        <SwipeItem
                                            Command="{Binding Source={RelativeSource AncestorType=
                                            {x:Type local:ChooseWorkoutPageViewModel}},
                                            Path=GoToEditWorkoutCommand}"
                                            CommandParameter="{Binding .}"
                                            IconImageSource="pen_solid_full.png"
                                            BackgroundColor="Yellow"/>
                                        <SwipeItem
                                            Command="{Binding Source={RelativeSource AncestorType=
                                            {x:Type local:ChooseWorkoutPageViewModel}},
                                            Path=DeleteWorkoutTemplateCommand}"
                                            CommandParameter="{Binding .}"
                                            IconImageSource="trash_solid_full.png"
                                            BackgroundColor="Red"/>
                                    </SwipeView.RightItems>
                                    <Button 
                                        Text="{Binding Name}"
                                        Command="{Binding Source={RelativeSource AncestorType=
                                        {x:Type local:ChooseWorkoutPageViewModel}}, 
                                        Path=OpenWorkoutCommand}"
                                        CommandParameter="{Binding .}"
                                        FontSize="24"
                                        FontAttributes="Bold"
                                        HeightRequest="150"
                                        CornerRadius="0"
                                        Margin="0,5,0,0"
                                        Background="{Binding Color, Converter={StaticResource WorkoutColorConv}}"/>
                                </SwipeView>
                            </VerticalStackLayout>
                        </DataTemplate>
                    </CollectionView.ItemTemplate>
                </CollectionView>

                <!--<Border
                    Margin="0,5,0,0"
                    Stroke="Black"
                    StrokeThickness="3">-->
                <BoxView HeightRequest="3"/>
                <Button
                    Text="New workout"
                    Command="{Binding OpenWorkoutCreatorCommand}"
                    TextColor="Black"
                    BackgroundColor="{StaticResource PrimaryColor}"
                    FontSize="24"
                    FontAttributes="Bold"
                    HeightRequest="150"
                    CornerRadius="0"
                    Margin="0,5,0,0"/>
                <BoxView HeightRequest="3"/>
                <!--</Border>-->
                
            </VerticalStackLayout>
        </ScrollView>
    </Grid>
</ContentPage>